{
  "version": 3,
  "sources": ["../../../src/lib/hooks/useTLStore.ts"],
  "sourcesContent": ["import { StoreSnapshot } from '@tldraw/store'\nimport { TLRecord } from '@tldraw/tlschema'\nimport { areObjectsShallowEqual } from '@tldraw/utils'\nimport { useState } from 'react'\nimport { TLStoreOptions, createTLStore } from '../config/createTLStore'\n\n/** @public */\ntype UseTLStoreOptions = TLStoreOptions & {\n\tsnapshot?: StoreSnapshot<TLRecord>\n}\n\nfunction createStore(opts: UseTLStoreOptions) {\n\tconst store = createTLStore(opts)\n\tif (opts.snapshot) {\n\t\tstore.loadSnapshot(opts.snapshot)\n\t}\n\treturn { store, opts }\n}\n\n/** @public */\nexport function useTLStore(opts: TLStoreOptions & { snapshot?: StoreSnapshot<TLRecord> }) {\n\tconst [current, setCurrent] = useState(() => createStore(opts))\n\n\tif (!areObjectsShallowEqual(current.opts, opts)) {\n\t\tconst next = createStore(opts)\n\t\tsetCurrent(next)\n\t\treturn next.store\n\t}\n\n\treturn current.store\n}\n"],
  "mappings": "AAEA,SAAS,8BAA8B;AACvC,SAAS,gBAAgB;AACzB,SAAyB,qBAAqB;AAO9C,SAAS,YAAY,MAAyB;AAC7C,QAAM,QAAQ,cAAc,IAAI;AAChC,MAAI,KAAK,UAAU;AAClB,UAAM,aAAa,KAAK,QAAQ;AAAA,EACjC;AACA,SAAO,EAAE,OAAO,KAAK;AACtB;AAGO,SAAS,WAAW,MAA+D;AACzF,QAAM,CAAC,SAAS,UAAU,IAAI,SAAS,MAAM,YAAY,IAAI,CAAC;AAE9D,MAAI,CAAC,uBAAuB,QAAQ,MAAM,IAAI,GAAG;AAChD,UAAM,OAAO,YAAY,IAAI;AAC7B,eAAW,IAAI;AACf,WAAO,KAAK;AAAA,EACb;AAEA,SAAO,QAAQ;AAChB;",
  "names": []
}
