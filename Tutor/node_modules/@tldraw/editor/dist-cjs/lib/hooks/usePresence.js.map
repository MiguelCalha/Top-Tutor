{
  "version": 3,
  "sources": ["../../../src/lib/hooks/usePresence.ts"],
  "sourcesContent": ["import { useValue } from '@tldraw/state'\nimport { TLInstancePresence } from '@tldraw/tlschema'\nimport { useMemo } from 'react'\nimport { useEditor } from './useEditor'\n\n// TODO: maybe move this to a computed property on the App class?\n/**\n * @returns The list of peer UserIDs\n * @internal\n */\nexport function usePresence(userId: string): TLInstancePresence | null {\n\tconst editor = useEditor()\n\n\tconst $presences = useMemo(() => {\n\t\treturn editor.store.query.records('instance_presence', () => ({\n\t\t\tuserId: { eq: userId },\n\t\t}))\n\t}, [editor, userId])\n\n\tconst latestPresence = useValue(\n\t\t`latestPresence:${userId}`,\n\t\t() => {\n\t\t\treturn $presences\n\t\t\t\t.get()\n\t\t\t\t.slice()\n\t\t\t\t.sort((a, b) => b.lastActivityTimestamp - a.lastActivityTimestamp)[0]\n\t\t},\n\t\t[]\n\t)\n\n\treturn latestPresence ?? null\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAyB;AAEzB,mBAAwB;AACxB,uBAA0B;AAOnB,SAAS,YAAY,QAA2C;AACtE,QAAM,aAAS,4BAAU;AAEzB,QAAM,iBAAa,sBAAQ,MAAM;AAChC,WAAO,OAAO,MAAM,MAAM,QAAQ,qBAAqB,OAAO;AAAA,MAC7D,QAAQ,EAAE,IAAI,OAAO;AAAA,IACtB,EAAE;AAAA,EACH,GAAG,CAAC,QAAQ,MAAM,CAAC;AAEnB,QAAM,qBAAiB;AAAA,IACtB,kBAAkB,MAAM;AAAA,IACxB,MAAM;AACL,aAAO,WACL,IAAI,EACJ,MAAM,EACN,KAAK,CAAC,GAAG,MAAM,EAAE,wBAAwB,EAAE,qBAAqB,EAAE,CAAC;AAAA,IACtE;AAAA,IACA,CAAC;AAAA,EACF;AAEA,SAAO,kBAAkB;AAC1B;",
  "names": []
}
