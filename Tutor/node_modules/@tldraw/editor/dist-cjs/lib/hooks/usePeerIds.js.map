{
  "version": 3,
  "sources": ["../../../src/lib/hooks/usePeerIds.ts"],
  "sourcesContent": ["import { useComputed, useValue } from '@tldraw/state'\nimport { useMemo } from 'react'\nimport { uniq } from '../utils/uniq'\nimport { useEditor } from './useEditor'\n\n// TODO: maybe move this to a computed property on the App class?\n/**\n * @returns The list of peer UserIDs\n * @internal\n */\nexport function usePeerIds() {\n\tconst editor = useEditor()\n\tconst $presences = useMemo(() => {\n\t\treturn editor.store.query.records('instance_presence', () => ({\n\t\t\tuserId: { neq: editor.user.getId() },\n\t\t}))\n\t}, [editor])\n\n\tconst $userIds = useComputed(\n\t\t'userIds',\n\t\t() => uniq($presences.get().map((p) => p.userId)).sort(),\n\t\t{ isEqual: (a, b) => a.join(',') === b.join?.(',') },\n\t\t[$presences]\n\t)\n\n\treturn useValue($userIds)\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAsC;AACtC,mBAAwB;AACxB,kBAAqB;AACrB,uBAA0B;AAOnB,SAAS,aAAa;AAC5B,QAAM,aAAS,4BAAU;AACzB,QAAM,iBAAa,sBAAQ,MAAM;AAChC,WAAO,OAAO,MAAM,MAAM,QAAQ,qBAAqB,OAAO;AAAA,MAC7D,QAAQ,EAAE,KAAK,OAAO,KAAK,MAAM,EAAE;AAAA,IACpC,EAAE;AAAA,EACH,GAAG,CAAC,MAAM,CAAC;AAEX,QAAM,eAAW;AAAA,IAChB;AAAA,IACA,UAAM,kBAAK,WAAW,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,KAAK;AAAA,IACvD,EAAE,SAAS,CAAC,GAAG,MAAM,EAAE,KAAK,GAAG,MAAM,EAAE,OAAO,GAAG,EAAE;AAAA,IACnD,CAAC,UAAU;AAAA,EACZ;AAEA,aAAO,uBAAS,QAAQ;AACzB;",
  "names": []
}
