{
  "version": 3,
  "sources": ["../../src/lib/defaultSideEffects.ts"],
  "sourcesContent": ["import { Editor } from '@tldraw/editor'\n\nexport function registerDefaultSideEffects(editor: Editor) {\n\treturn [\n\t\teditor.sideEffects.registerAfterChangeHandler('instance', (prev, next) => {\n\t\t\tif (prev.isFocused !== next.isFocused) {\n\t\t\t\tif (next.isFocused) {\n\t\t\t\t\teditor.getContainer().focus()\n\t\t\t\t} else {\n\t\t\t\t\teditor.complete() // stop any interaction\n\t\t\t\t\teditor.getContainer().blur() // blur the container\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\teditor.sideEffects.registerAfterChangeHandler('instance_page_state', (prev, next) => {\n\t\t\tif (prev.croppingShapeId !== next.croppingShapeId) {\n\t\t\t\tconst isInCroppingState = editor.isInAny(\n\t\t\t\t\t'select.crop',\n\t\t\t\t\t'select.pointing_crop_handle',\n\t\t\t\t\t'select.cropping'\n\t\t\t\t)\n\t\t\t\tif (!prev.croppingShapeId && next.croppingShapeId) {\n\t\t\t\t\tif (!isInCroppingState) {\n\t\t\t\t\t\teditor.setCurrentTool('select.crop.idle')\n\t\t\t\t\t}\n\t\t\t\t} else if (prev.croppingShapeId && !next.croppingShapeId) {\n\t\t\t\t\tif (isInCroppingState) {\n\t\t\t\t\t\teditor.setCurrentTool('select.idle')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (prev.editingShapeId !== next.editingShapeId) {\n\t\t\t\tif (!prev.editingShapeId && next.editingShapeId) {\n\t\t\t\t\tif (!editor.isIn('select.editing_shape')) {\n\t\t\t\t\t\teditor.setCurrentTool('select.editing_shape')\n\t\t\t\t\t}\n\t\t\t\t} else if (prev.editingShapeId && !next.editingShapeId) {\n\t\t\t\t\tif (editor.isIn('select.editing_shape')) {\n\t\t\t\t\t\teditor.setCurrentTool('select.idle')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t]\n}\n"],
  "mappings": "AAEO,SAAS,2BAA2B,QAAgB;AAC1D,SAAO;AAAA,IACN,OAAO,YAAY,2BAA2B,YAAY,CAAC,MAAM,SAAS;AACzE,UAAI,KAAK,cAAc,KAAK,WAAW;AACtC,YAAI,KAAK,WAAW;AACnB,iBAAO,aAAa,EAAE,MAAM;AAAA,QAC7B,OAAO;AACN,iBAAO,SAAS;AAChB,iBAAO,aAAa,EAAE,KAAK;AAAA,QAC5B;AAAA,MACD;AAAA,IACD,CAAC;AAAA,IACD,OAAO,YAAY,2BAA2B,uBAAuB,CAAC,MAAM,SAAS;AACpF,UAAI,KAAK,oBAAoB,KAAK,iBAAiB;AAClD,cAAM,oBAAoB,OAAO;AAAA,UAChC;AAAA,UACA;AAAA,UACA;AAAA,QACD;AACA,YAAI,CAAC,KAAK,mBAAmB,KAAK,iBAAiB;AAClD,cAAI,CAAC,mBAAmB;AACvB,mBAAO,eAAe,kBAAkB;AAAA,UACzC;AAAA,QACD,WAAW,KAAK,mBAAmB,CAAC,KAAK,iBAAiB;AACzD,cAAI,mBAAmB;AACtB,mBAAO,eAAe,aAAa;AAAA,UACpC;AAAA,QACD;AAAA,MACD;AAEA,UAAI,KAAK,mBAAmB,KAAK,gBAAgB;AAChD,YAAI,CAAC,KAAK,kBAAkB,KAAK,gBAAgB;AAChD,cAAI,CAAC,OAAO,KAAK,sBAAsB,GAAG;AACzC,mBAAO,eAAe,sBAAsB;AAAA,UAC7C;AAAA,QACD,WAAW,KAAK,kBAAkB,CAAC,KAAK,gBAAgB;AACvD,cAAI,OAAO,KAAK,sBAAsB,GAAG;AACxC,mBAAO,eAAe,aAAa;AAAA,UACpC;AAAA,QACD;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;AACD;",
  "names": []
}
